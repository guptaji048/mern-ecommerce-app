(this.webpackJsonpprojfrontend=this.webpackJsonpprojfrontend||[]).push([[0],{16:function(e,t,a){},22:function(e,t,a){e.exports=a(33)},33:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(18),o=a.n(c),l=a(2),s=a(7),m=a(3),i="https://mern-tstore-backend.herokuapp.com/api",d=function(){return"undefined"!==typeof window&&(!!localStorage.getItem("jwt")&&JSON.parse(localStorage.getItem("jwt")))},u=(a(16),function(e,t){return e.location.pathname===t?{color:"#2ecc72"}:{color:"#FFFFFF"}}),p=Object(s.g)((function(e){var t=e.history;return r.a.createElement("div",null,r.a.createElement("ul",{className:"nav nav-tabs bg-dark"},r.a.createElement("div",null,r.a.createElement("li",null,r.a.createElement("p",{className:"logo nav-item"},"T-Store"))),r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.b,{style:u(t,"/"),className:"nav-link",to:"/"},"Home")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.b,{style:u(t,"/cart"),className:"nav-link",to:"/cart"},"Cart")),d()&&0===d().user.role&&r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.b,{style:u(t,"/user/dashboard"),className:"nav-link",to:"/user/dashboard"},"Dashboard")),d()&&1===d().user.role&&r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.b,{style:u(t,"/admin/dashboard"),className:"nav-link",to:"/admin/dashboard"},"Dashboard")),!d()&&r.a.createElement(n.Fragment,null,r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.b,{style:u(t,"/signup"),className:"nav-link",to:"/signup"},"Sign Up")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.b,{style:u(t,"/signin"),className:"nav-link",to:"/signin"},"Sign in"))),d()&&r.a.createElement("li",{className:"nav-item"},r.a.createElement("span",{style:{cursor:"pointer"},className:"nav-link text-warning",onClick:function(){!function(e){if("undefined"!==typeof window)localStorage.removeItem("jwt"),e(),fetch("".concat(i,"/signout"),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}((function(){t.push("/")}))}},"Signout"))))})),E=function(e){var t=e.title,a=void 0===t?"My Title":t,n=e.description,c=void 0===n?"My desription":n,o=e.className,l=void 0===o?"bg-dark text-white p-4":o,s=e.children;return r.a.createElement("div",null,r.a.createElement(p,null),r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"jumbotron bg-dark text-white text-center"},r.a.createElement("h2",{className:"display-4"},a),r.a.createElement("p",{className:"lead"},c)),r.a.createElement("div",{className:l},s)),r.a.createElement("footer",{className:"footer bg-dark mt-auto py-2"},r.a.createElement("div",{className:"container-fluid bg-success text-white text-center py-3"},r.a.createElement("h4",null,"If you got any questions, feel free to reach out!"),r.a.createElement("button",{className:"btn btn-warning btn-lg"},"Contact Us")),r.a.createElement("div",{className:"container"},r.a.createElement("span",{className:"text-muted"},"An Amazing ",r.a.createElement("span",{className:"text-white"},"MERN")," Project"))))};function f(e){var t=e.product,a=t?"".concat(i,"/product/photo/").concat(t._id):"https://images.pexels.com/photos/3561339/pexels-photo-3561339.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940";return r.a.createElement("div",{className:"rounded border border-success p-2"},r.a.createElement("img",{src:a,alt:"",style:{maxHeight:"100%",maxWidth:"100%"},className:"mb-3 rounded"}))}var g=a(1),b=function(e){if(void 0!==typeof window){localStorage.removeItem("cart"),e();localStorage.setItem("cart",JSON.stringify([]))}},h=function(e){var t=e.product,a=e.addCart,c=void 0===a||a,o=e.removeCart,l=void 0!==o&&o,i=e.title,d=void 0===i?"A photo from pexels":i,u=e.description,p=void 0===u?"this photo looks great":u,E=e.price,b=void 0===E?"5":E,h=e.setreload,N=void 0===h?function(e){return e}:h,v=e.reload,y=void 0===v?void 0:v,j=Object(n.useState)(!1),O=Object(m.a)(j,2),w=O[0],x=O[1],k=function(){!function(e,t){var a=[];void 0!==typeof window&&(localStorage.getItem("cart")&&(a=JSON.parse(localStorage.getItem("cart"))),a.push(Object(g.a)({},e,{count:1})),localStorage.setItem("cart",JSON.stringify(a)),t())}(t,(function(){x(!0)}))};return r.a.createElement("div",{className:"card text-white bg-dark border border-info "},r.a.createElement("div",{className:"card-header lead"},d),r.a.createElement("div",{className:"card-body"},function(e){if(e)return r.a.createElement(s.a,{to:"/cart"})}(w),r.a.createElement(f,{product:t}),r.a.createElement("p",{className:"lead bg-success font-weight-normal text-wrap"},p),r.a.createElement("p",{className:"btn btn-success rounded  btn-sm px-4"},"\u20b9 ",b),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},function(e){return e&&r.a.createElement("button",{onClick:k,className:"btn btn-block btn-outline-success mt-2 mb-2"},"Add to Cart")}(c)),r.a.createElement("div",{className:"col-12"},function(e){return e&&r.a.createElement("button",{onClick:function(){!function(e){var t=[];void 0!==typeof window&&(localStorage.getItem("cart")&&(t=JSON.parse(localStorage.getItem("cart"))),t.map((function(a,n){a._id===e&&t.splice(n,1)})),localStorage.setItem("cart",JSON.stringify(t)))}(t._id),N(!y)},className:"btn btn-block btn-outline-danger mt-2 mb-2"},"Remove from cart")}(l)))))};function N(){var e=Object(n.useState)([]),t=Object(m.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(!1),l=Object(m.a)(o,2),s=l[0],d=l[1],u=function(){fetch("".concat(i,"/products"),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)})).then((function(e){e.error?d(e.error):c(e)}))};return Object(n.useEffect)((function(){u()}),[]),r.a.createElement(E,{title:"T-store",description:"Checkout our latest collection of I Write Code t-shirts"},r.a.createElement("div",{className:"row text-center"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12 text-center"},r.a.createElement("div",{className:"alert alert-danger",style:{display:s?"":"none"}},s))),a.map((function(e,t){return r.a.createElement("div",{key:t,className:"col-4 mb-4"},r.a.createElement(h,{product:e,title:e.name,description:e.description,price:e.price}))})))))}var v=a(5),y=function(){var e=Object(n.useState)({name:"",email:"",password:"",error:"",success:!1}),t=Object(m.a)(e,2),a=t[0],c=t[1],o=a.name,s=a.email,d=a.password,u=a.error,p=a.success,f=function(e){return function(t){c(Object(g.a)({},a,Object(v.a)({error:!1},e,t.target.value)))}},b=function(e){var t;e.preventDefault(),c(Object(g.a)({},a,{error:!1})),(t={name:o,email:s,password:d},fetch("".concat(i,"/signup"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))).then((function(e){e.error?c(Object(g.a)({},a,{error:e.error,success:!1})):c(Object(g.a)({},a,{name:"",email:"",password:"",error:"",success:!0}))})).catch(console.log("Error in Signup"))};return r.a.createElement(E,{title:"Signup",description:"New User? Sign Up to our system!"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6 offset-sm-3 text-center"},r.a.createElement("div",{className:"alert alert-success",style:{display:p?"":"none"}},"Registered Successfully.! Please"," ",r.a.createElement(l.b,{to:"/signin"},"Login here")))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6 offset-sm-3 text-center"},r.a.createElement("div",{className:"alert alert-danger",style:{display:u?"":"none"}},u))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6 offset-sm-3 text-left"},r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-light"},"Name"),r.a.createElement("input",{className:"form-control",type:"text",placeholder:"Full Name",onChange:f("name"),value:o})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-light"},"Email"),r.a.createElement("input",{className:"form-control",type:"email",placeholder:"Email",onChange:f("email"),value:s})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-light"},"Password"),r.a.createElement("input",{className:"form-control",type:"password",placeholder:"Password",onChange:f("password"),value:d})),r.a.createElement("button",{className:"btn btn-success btn-block",onClick:b},"Submit")))))},j=function(){var e=Object(n.useState)({email:"@gmail.com",password:"",error:"",loading:!1,didRedirect:!1}),t=Object(m.a)(e,2),a=t[0],c=t[1],o=a.email,l=a.password,u=a.error,p=a.loading,f=a.didRedirect,b=d().user,h=function(e){return function(t){c(Object(g.a)({},a,Object(v.a)({error:!1},e,t.target.value)))}},N=function(e){e.preventDefault(),c(Object(g.a)({},a,{error:!1,loading:!0})),function(e){return fetch("".concat(i,"/signin"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}({email:o,password:l}).then((function(e){e.error?c(Object(g.a)({},a,{error:e.error,loading:!1})):function(e,t){"undefined"!==typeof window&&(localStorage.setItem("jwt",JSON.stringify(e)),t())}(e,(function(){c(Object(g.a)({},a,{didRedirect:!0}))}))})).catch(console.log("signin request failed"))};return r.a.createElement(E,{title:"Sign In page",description:"A page for user to sign in!"},p&&r.a.createElement("div",{className:"alert alert-info"},r.a.createElement("h2",null,"Loading...")),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6 offset-sm-3 text-left"},r.a.createElement("div",{className:"alert alert-danger",style:{display:u?"":"none"}},u))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6 offset-sm-3 text-left"},r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-light"},"Email"),r.a.createElement("input",{onChange:h("email"),value:o,className:"form-control",type:"email"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-light"},"Password"),r.a.createElement("input",{onChange:h("password"),value:l,className:"form-control",type:"password"})),r.a.createElement("button",{onClick:N,className:"btn btn-success btn-block"},"Submit")))),f?b&&1===b.role?r.a.createElement(s.a,{to:"/admin/dashboard"}):r.a.createElement(s.a,{to:"/user/dashboard"}):d()?r.a.createElement(s.a,{to:"/"}):void 0)};function O(){return r.a.createElement(E,{title:"Signout",description:"user signed out"})}function w(){return r.a.createElement(E,{title:"Profile Page",description:"Update your profile here"})}var x=a(9),k=a.n(x),C=a(10),S=function(e,t){return fetch("".concat(i,"/user/").concat(e),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))};function A(){var e=d(),t=e.user,a=e.token,c=Object(n.useState)({address:"",pincode:"",city:"",number:"",name:"",email:""}),o=Object(m.a)(c,2),s=o[0],i=o[1],u=s.address,p=s.pincode,f=s.city,b=s.number,h=s.name,N=s.email;S(t._id,a).then(function(){var e=Object(C.a)(k.a.mark((function e(t){var a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:a=e.sent,i(Object(g.a)({},s,{address:a.address,pincode:a.pincode,city:a.city,number:a.number,name:a.name,email:a.email}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return r.a.createElement(E,{title:"Welcome User",description:"Manage everything from here",className:"container bg-secondary p-4 mb-5"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"card mb-4"},r.a.createElement("h4",{className:"card-header bg-dark text-white"}," User Information "),r.a.createElement("ul",{className:"list-group"},r.a.createElement("li",{className:"list-group-item"},r.a.createElement("span",{className:"badge mr-2"},"Name:"),h),r.a.createElement("li",{className:"list-group-item"},r.a.createElement("span",{className:"badge mr-2"},"Email:"),N),r.a.createElement("li",{className:"list-group-item"},r.a.createElement("span",{className:"badge mr-2"},"Address:"),u),r.a.createElement("li",{className:"list-group-item"},r.a.createElement("span",{className:"badge mr-2"},"City:"),f),r.a.createElement("li",{className:"list-group-item"},r.a.createElement("span",{className:"badge mr-2"},"Pincode:"),p),r.a.createElement("li",{className:"list-group-item"},r.a.createElement("span",{className:"badge mr-2"},"Number:"),b)),r.a.createElement("button",{className:"btn btn-block col-md-4 offset-md-4 btn-warning mt-2 mb-2"},r.a.createElement(l.b,{className:"nav-link text-dark text-center",to:"/user/update"},"Update info"))))))}function P(){var e=d().user,t=e.name,a=e.email;return r.a.createElement(E,{title:"Welcome Admin",description:"Manage everything from here",className:"container bg-secondary p-4 mb-5"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-3"},r.a.createElement("div",{className:"card"},r.a.createElement("h4",{className:"card-header bg-dark text-white"}," Admin Navigation"),r.a.createElement("ul",{className:"list-group"},r.a.createElement("li",{className:"list-group-item"},r.a.createElement(l.b,{className:"nav-link text-dark text-center",to:"/admin/create/category"},"Create Category")),r.a.createElement("li",{className:"list-group-item"},r.a.createElement(l.b,{className:"nav-link text-dark text-center",to:"/admin/categories"},"Manage Category")),r.a.createElement("li",{className:"list-group-item"},r.a.createElement(l.b,{className:"nav-link text-dark text-center",to:"/admin/create/product"},"Create Product")),r.a.createElement("li",{className:"list-group-item"},r.a.createElement(l.b,{className:"nav-link text-dark text-center",to:"/admin/product/all"},"Manage Products")),r.a.createElement("li",{className:"list-group-item"},r.a.createElement(l.b,{className:"nav-link text-dark text-center",to:"/admin/order/all"},"Manage Orders"))))),r.a.createElement("div",{className:"col-9"},r.a.createElement("div",{className:"card mb-4"},r.a.createElement("h4",{className:"card-header bg-dark text-white"}," Admin Information "),r.a.createElement("ul",{className:"list-group"},r.a.createElement("li",{className:"list-group-item"},r.a.createElement("span",{className:"badge mr-2"},"Name:"),t),r.a.createElement("li",{className:"list-group-item"},r.a.createElement("span",{className:"badge mr-2"},"Email:"),a))))))}var D=function(){return fetch("".concat(i,"/categories"),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))};function T(){var e=Object(n.useState)(""),t=Object(m.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(!1),l=Object(m.a)(o,2),s=l[0],u=l[1],p=Object(n.useState)(!1),f=Object(m.a)(p,2),g=f[0],b=f[1],h=d(),N=h.user,v=h.token,y=function(e){u(""),c(e.target.value)},j=function(e){e.preventDefault(),u(""),b(!1),function(e,t,a){return fetch("".concat(i,"/category/create/").concat(e),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(a)}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}(N._id,v,{name:a}).then((function(e){e.error?u(e.error):(u(""),b(!0),c(""))}))};return r.a.createElement(E,{title:"Create Category",description:"Add category for new T-shirts",className:"container col-8 p-2 bg-secondary rounded mb-2"},r.a.createElement("div",{className:"row rounded text-white"},r.a.createElement("div",{className:"col-md-8 offset-md-2"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12 text-center"},r.a.createElement("div",{className:"alert alert-success",style:{display:g?"":"none"}},"Category Created"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12 text-center"},r.a.createElement("div",{className:"alert alert-danger",style:{display:s?"":"none"}},s))),r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("p",{className:"lead"},"Enter the category"),r.a.createElement("input",{className:"form-control my-3",autoFocus:!0,required:!0,onChange:y,value:a,placeholder:"For ex. Summer"}),r.a.createElement("div",{className:"text-right"},r.a.createElement("button",{onClick:j,className:"btn btn-outline-warning"},"Create")))))))}function I(){var e=Object(n.useState)([]),t=Object(m.a)(e,2),a=t[0],c=t[1],o=d(),s=o.user,u=o.token,p=function(){D().then((function(e){e.error?console.log(e.error):c(e)}))};Object(n.useEffect)((function(){p()}),[]);var f=function(e){(function(e,t,a){return fetch("".concat(i,"/category/").concat(t,"/").concat(e),{method:"DELETE",headers:{Accept:"application/json",Authorization:"Bearer ".concat(a)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(s._id,e,u).then((function(e){e.error?console.log(e.error):p()}))};return r.a.createElement(E,{title:"Welcome admin",description:"Manage products here"},r.a.createElement("h2",{className:"mb-4"},"All Categories:"),r.a.createElement(l.b,{className:"btn btn-info",to:"/admin/dashboard"},r.a.createElement("span",{className:""},"Admin Home")),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h2",{className:"text-center text-white my-3"},"Total ",a.length," category"),a.map((function(e,t){return r.a.createElement("div",{key:t,className:"row text-center mb-2 "},r.a.createElement("div",{className:"col-4"},r.a.createElement("h3",{className:"text-white text-left"},e.name)),r.a.createElement("div",{className:"col-4"},r.a.createElement(l.b,{className:"btn btn-success",to:"/admin/product/update/productId"},r.a.createElement("span",{className:""},"Update"))),r.a.createElement("div",{className:"col-4"},r.a.createElement("button",{onClick:function(){f(e._id)},className:"btn btn-danger"},"Delete")))})))))}function U(){var e=d(),t=e.user,a=e.token,c=Object(n.useState)({name:"",description:"",price:"",stock:"",error:"",photo:"",categories:[],category:"",loading:!1,createdProduct:"",getRedirect:!1,formData:"",success:!1}),o=Object(m.a)(c,2),l=o[0],s=o[1],u=l.name,p=l.description,f=l.price,b=l.stock,h=l.error,N=l.categories,y=l.category,j=l.loading,O=l.createdProduct,w=l.formData,x=function(e){return function(t){var a="photo"===e?t.target.files[0]:t.target.value;w.set(e,a),s(Object(g.a)({},l,Object(v.a)({error:!1},e,a)))}};Object(n.useEffect)((function(){D().then((function(e){e.error?s(Object(g.a)({},l,{error:e.error})):s(Object(g.a)({},l,{categories:e,formData:new FormData}))}))}),[]);var k=function(e){e.preventDefault(),s(Object(g.a)({},l,{error:"",loading:!0})),function(e,t,a){return fetch("".concat(i,"/product/create/").concat(e),{method:"POST",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t)},body:a}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}(t._id,a,w).then((function(e){e.error?s(Object(g.a)({},l,{error:e.error})):s(Object(g.a)({},l,{name:"",description:"",price:"",stock:"",loading:!1,createdProduct:e.name}))})).catch()};return r.a.createElement(E,{title:"Add Product",description:"Add new T-shirts in collection!",className:"container text-white p-4"},r.a.createElement("div",{className:"row text-white rounded"},r.a.createElement("div",{className:"col-md-8 offset-md-2"},j&&r.a.createElement("div",{className:"alert alert-info"},r.a.createElement("h2",null,"Loading...")),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12 text-center"},r.a.createElement("div",{className:"alert alert-success",style:{display:O?"":"none"}},O," Created!!"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12 text-center"},r.a.createElement("div",{className:"alert alert-danger",style:{display:h?"":"none"}},h))),r.a.createElement("form",null,r.a.createElement("span",null,"Post photo"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"btn btn-block btn-success"},r.a.createElement("input",{onChange:x("photo"),type:"file",name:"photo",accept:"image",placeholder:"choose a file"}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{onChange:x("name"),name:"photo",className:"form-control",placeholder:"Name",value:u})),r.a.createElement("div",{className:"form-group"},r.a.createElement("textarea",{onChange:x("description"),name:"photo",className:"form-control",placeholder:"Description",value:p})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{onChange:x("price"),type:"number",className:"form-control",placeholder:"Price",value:f})),r.a.createElement("div",{className:"form-group"},r.a.createElement("select",{onChange:x("category"),className:"form-control",placeholder:"Category",value:y},r.a.createElement("option",null,"Select Category"),N&&N.map((function(e,t){return r.a.createElement("option",{key:t,value:e._id},e.name)})))),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{onChange:x("stock"),type:"number",className:"form-control",placeholder:"Quantity",value:b})),r.a.createElement("button",{type:"submit",onClick:k,className:"btn btn-outline-warning"},"Create Product")))))}function _(){var e=Object(n.useState)([]),t=Object(m.a)(e,2),a=t[0],c=t[1],o=d(),s=o.user,u=o.token,p=function(){fetch("".concat(i,"/products"),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)})).then((function(e){e.error?console.log(e.error):c(e)}))};Object(n.useEffect)((function(){p()}),[]);var g=function(e){(function(e,t,a){return fetch("".concat(i,"/product/").concat(t,"/").concat(e),{method:"DELETE",headers:{Accept:"application/json",Authorization:"Bearer ".concat(a)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(s._id,e,u).then((function(e){e.error?console.log(e.error):p()}))};return r.a.createElement(E,{title:"Manage Products",description:"Read, Update and Delete products here"},r.a.createElement("h2",{className:"mb-4"},"All products:"),r.a.createElement(l.b,{className:"btn btn-info",to:"/admin/dashboard"},r.a.createElement("span",{className:""},"Admin Home")),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h2",{className:"text-center text-white my-3"},"Total ",a.length," products"),a.map((function(e,t){return r.a.createElement("div",{key:t,className:"row text-center mb-2 "},r.a.createElement("div",{className:"col-3"},r.a.createElement(f,{product:e})),r.a.createElement("div",{className:"col-3"},r.a.createElement("h3",{className:"text-white text-left"},e.name)),r.a.createElement("div",{className:"col-3"},r.a.createElement(l.b,{className:"btn btn-success",to:"/admin/product/update/".concat(e._id)},r.a.createElement("span",{className:""},"Update"))),r.a.createElement("div",{className:"col-3"},r.a.createElement("button",{onClick:function(){g(e._id)},className:"btn btn-danger"},"Delete")))})))))}var J=a(11),F=function(e){var t=e.component,a=Object(J.a)(e,["component"]);return r.a.createElement(s.b,Object.assign({},a,{render:function(e){return d()&&1===d().user.role?r.a.createElement(t,e):r.a.createElement(s.a,{to:{pathname:"/signin",state:{from:e.location}}})}}))},M=function(e){var t=e.component,a=Object(J.a)(e,["component"]);return r.a.createElement(s.b,Object.assign({},a,{render:function(e){return d()?r.a.createElement(t,e):r.a.createElement(s.a,{to:{pathname:"/signin",state:{from:e.location}}})}}))};function R(e){var t=e.match,a=d(),c=a.user,o=a.token,s=Object(n.useState)({name:"",description:"",price:"",stock:"",error:"",photo:"",categories:[],category:"",loading:!1,createdProduct:"",getRedirect:!1,formData:"",success:!1}),u=Object(m.a)(s,2),p=u[0],f=u[1],b=p.name,h=p.description,N=p.price,y=p.stock,j=p.error,O=p.categories,w=p.category,x=p.loading,k=p.createdProduct,C=p.formData,S=function(e){return function(t){var a="photo"===e?t.target.files[0]:t.target.value;C.set(e,a),f(Object(g.a)({},p,Object(v.a)({error:!1},e,a)))}},A=function(e){(function(e){return fetch("".concat(i,"/product/").concat(e),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(e).then((function(e){e.error?f(Object(g.a)({},p,{error:e.error})):(P(),f(Object(g.a)({},p,{name:e.name,description:e.description,price:e.price,category:e.category.name,stock:e.stock,formData:new FormData})))}))},P=function(){D().then((function(e){e.error?f(Object(g.a)({},p,{error:e.error})):f({categories:e,category:e.name,formData:new FormData})}))};Object(n.useEffect)((function(){A(t.params.productId)}),[]);var T=function(e){e.preventDefault(),f(Object(g.a)({},p,{error:"",loading:!0})),function(e,t,a,n){return fetch("".concat(i,"/product/").concat(n,"/").concat(e),{method:"PUT",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t)},body:a}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}(c._id,o,C,t.params.productId).then((function(e){e.error?f(Object(g.a)({},p,{error:e.error})):f(Object(g.a)({},p,{name:"",description:"",price:"",stock:"",loading:!1,createdProduct:e.name}))})).catch()};return r.a.createElement(E,{title:"Update Product",description:"Edit product details",className:"container text-white p-4"},r.a.createElement(l.b,{to:"/admin/product/all",className:"btn btn-md btn-info mb-3"},"Manage Product"),r.a.createElement("div",{className:"row text-white rounded"},r.a.createElement("div",{className:"col-md-8 offset-md-2"},x&&r.a.createElement("div",{className:"alert alert-info"},r.a.createElement("h2",null,"Loading...")),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12 text-center"},r.a.createElement("div",{className:"alert alert-success",style:{display:k?"":"none"}},k," Updated!!"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12 text-center"},r.a.createElement("div",{className:"alert alert-danger",style:{display:j?"":"none"}},j))),r.a.createElement("form",null,r.a.createElement("span",null,"Post photo"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"btn btn-block btn-success"},r.a.createElement("input",{onChange:S("photo"),type:"file",name:"photo",accept:"image",placeholder:"choose a file"}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{onChange:S("name"),className:"form-control",placeholder:"Name",value:b})),r.a.createElement("div",{className:"form-group"},r.a.createElement("textarea",{onChange:S("description"),name:"photo",className:"form-control",placeholder:"Description",value:h})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{onChange:S("price"),type:"number",className:"form-control",placeholder:"Price",value:N})),r.a.createElement("div",{className:"form-group"},r.a.createElement("select",{onChange:S("category"),className:"form-control",placeholder:"Category",value:w},r.a.createElement("option",null,w),O&&O.map((function(e,t){return r.a.createElement("option",{key:t,value:e._id},e.name)})))),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{onChange:S("stock"),type:"number",className:"form-control",placeholder:"Quantity",value:y})),r.a.createElement("button",{type:"submit",onClick:T,className:"btn btn-outline-warning"},"Update Product")))))}var z=a(21),B=a.n(z),L=function(e){var t=e.products,a=e.setReload,c=void 0===a?function(e){return e}:a,o=e.reload,s=void 0===o?void 0:o,u=Object(n.useState)({loading:!1,success:!1,error:""}),p=Object(m.a)(u,2),E=p[0],f=p[1],h=E.loading,N=E.success,v=E.error,y=(d()&&d().user._id,d()&&d().token,function(e){var t=0;return e.map((function(e){t+=e.price})),t}),j=function(e){f(Object(g.a)({},E,{error:!1,loading:!0}));var a={products:t,token:e};return fetch("".concat(i,"/stripepayment"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then(function(){var e=Object(C.a)(k.a.mark((function e(a){var n,r,o;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(Object(g.a)({},E,{success:!0,error:!0})),e.next=3,a.json();case 3:return n=e.sent,e.next=6,n.billing_details;case 6:return r=e.sent,e.next=9,r.address;case 9:o=e.sent,{products:t,transaction_id:n.id,amount:n.amount,address:o.line1},b((function(){c(!s)}));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){f(Object(g.a)({},E,{success:!1,error:e}))}))};return r.a.createElement("div",null,r.a.createElement("h3",null,"Your bill is \u20b9",y(t)),d()?r.a.createElement(B.a,{stripeKey:"pk_test_53Lxyz5TiQsKy0ZkV9onupge009kV6JpMD",token:j,amount:100*y(t),currency:"INR",shippingAddress:!0,billingAddress:!0},r.a.createElement("button",{className:"btn btn-success"},"Proceed to Pay")):r.a.createElement("span",null,"To proceed further",r.a.createElement(l.b,{to:"/signin",className:"text-warning"},"Sign in")),h&&r.a.createElement("div",{className:"alert alert-info"},r.a.createElement("h2",null,"Loading...")),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12 text-center"},r.a.createElement("div",{className:"alert alert-success",style:{display:N?"":"none"}},"Order Placed.!"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12 text-center"},r.a.createElement("div",{className:"alert alert-danger",style:{display:v?"":"none"}},v))))};function G(){var e=Object(n.useState)([]),t=Object(m.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(!1),l=Object(m.a)(o,2),s=l[0],i=l[1];Object(n.useEffect)((function(){c(function(){if(void 0!==typeof window){if(localStorage.getItem("cart"))return JSON.parse(localStorage.getItem("cart"));localStorage.setItem("cart",JSON.stringify([]))}}())}),[s]);return r.a.createElement(E,{title:"Your Cart",description:"Summary of your purchase"},r.a.createElement("div",{className:"row"},a.length>0?r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"col-6"},function(e){return r.a.createElement("div",null,e.map((function(e,t){return r.a.createElement(h,{key:t,product:e,removeCart:!0,addCart:!1,title:e.name,description:e.description,price:e.price,setreload:i,reload:s})})))}(a)),r.a.createElement("div",{className:"col-6"},r.a.createElement(L,{products:a,setReload:i}))):r.a.createElement("h3",{className:"col-12 text-center text-danger"},"Cart Empty")))}function W(){var e=Object(n.useState)([]),t=Object(m.a)(e,2),a=t[0],c=t[1],o=d(),s=o.user,u=o.token,p=function(){(function(e,t){return fetch("".concat(i,"/orders/").concat(e),{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(s._id,u).then((function(e){e.error?console.log(e.error):c(e)}))};return Object(n.useEffect)((function(){p()}),[]),r.a.createElement(E,{title:"Welcome admin",description:"Manage products here"},r.a.createElement("h2",{className:"mb-4"},"All Orders:"),r.a.createElement(l.b,{className:"btn btn-info",to:"/admin/dashboard"},r.a.createElement("span",{className:""},"Admin Home")),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h2",{className:"text-center text-white my-3"},"Total ",a.length," orders"),a.map((function(e,t){return r.a.createElement("div",{key:t,className:"row text-center mb-2 "},r.a.createElement("div",{className:"col-6"},r.a.createElement("h3",{className:"text-white text-left"},e._id)),r.a.createElement("div",{className:"col-6"},r.a.createElement("button",{onClick:function(){},className:"btn btn-danger"},"Reject")))})))))}function H(){var e=d(),t=e.user,a=e.token,c=d()&&d().user._id,o=Object(n.useState)({address:"",pincode:"",city:"",number:"",name:"",email:"",loading:!1,success:!1,createdUser:"",formData:"",error:""}),s=Object(m.a)(o,2),u=s[0],p=s[1],f=u.address,b=u.pincode,h=u.city,N=u.number,y=u.name,j=u.email,O=u.loading,w=u.createdUser,x=u.formData,k=u.error,C=function(e){return function(t){var a="photo"===e?t.target.files[0]:t.target.value;x.set(e,a),p(Object(g.a)({},u,Object(v.a)({error:!1},e,a)))}};Object(n.useEffect)((function(){!function(e,t){S(e,t).then((function(e){e.error?p(Object(g.a)({},u,{error:e.error})):p(Object(g.a)({},u,{name:e.name,email:e.email,address:e.address,pincode:e.pincode,city:e.city,number:e.number,formData:new FormData}))}))}(c,a)}),[]);var A=function(e){e.preventDefault(),p(Object(g.a)({},u,{error:"",loading:!0})),function(e,t,a){return fetch("".concat(i,"/user/").concat(e),{method:"PUT",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(a)}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}(t._id,a,x).then((function(e){e.error?p(Object(g.a)({},u,{error:e.error})):p(Object(g.a)({},u,{address:"",pincode:"",city:"",number:"",name:"",email:"",loading:!1,createdUser:e.name}))})).catch()};return r.a.createElement(E,{title:"Update User",description:"Edit your details",className:"container text-white p-4"},r.a.createElement(l.b,{to:"/user/dashboard",className:"btn btn-md btn-info mb-3"},"Dashboard"),r.a.createElement("div",{className:"row text-white rounded"},r.a.createElement("div",{className:"col-md-8 offset-md-2"},O&&r.a.createElement("div",{className:"alert alert-info"},r.a.createElement("h2",null,"Loading...")),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12 text-center"},r.a.createElement("div",{className:"alert alert-success",style:{display:w?"":"none"}},w," Updated!!"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12 text-center"},r.a.createElement("div",{className:"alert alert-danger",style:{display:k?"":"none"}},k))),r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{onChange:C("name"),name:"user",className:"form-control",placeholder:"Name",value:y})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{onChange:C("email"),name:"user",type:"email",className:"form-control",placeholder:"Email",value:j})),r.a.createElement("div",{className:"form-group"},r.a.createElement("textarea",{onChange:C("address"),name:"user",className:"form-control",placeholder:"Address",value:f})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{onChange:C("number"),name:"user",type:"number",className:"form-control",placeholder:"Mobile Number",value:N})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{onChange:C("pincode"),name:"user",type:"number",className:"form-control",placeholder:"Pincode",value:b})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{onChange:C("city"),name:"user",className:"form-control",placeholder:"City",value:h})),r.a.createElement("button",{type:"submit",onClick:A,className:"btn btn-outline-warning"},"Update Product")))))}function q(){return r.a.createElement(l.a,null,r.a.createElement(s.d,null,r.a.createElement(s.b,{path:"/",exact:!0,component:N}),r.a.createElement(s.b,{path:"/signup",exact:!0,component:y}),r.a.createElement(s.b,{path:"/signin",exact:!0,component:j}),r.a.createElement(s.b,{path:"/signout",exact:!0,component:O}),r.a.createElement(s.b,{path:"/cart",exact:!0,component:G}),r.a.createElement(s.b,{path:"/user/update",exact:!0,component:H}),r.a.createElement(M,{path:"/user/dashboard",exact:!0,component:A}),r.a.createElement(M,{path:"/user/profile",exact:!0,component:w}),r.a.createElement(F,{path:"/admin/dashboard",exact:!0,component:P}),r.a.createElement(F,{path:"/admin/create/category",exact:!0,component:T}),r.a.createElement(F,{path:"/admin/categories",exact:!0,component:I}),r.a.createElement(F,{path:"/admin/create/product",exact:!0,component:U}),r.a.createElement(F,{path:"/admin/product/all",exact:!0,component:_}),r.a.createElement(F,{path:"/admin/product/update/:productId",exact:!0,component:R}),r.a.createElement(F,{path:"/admin/order/all",exact:!0,component:W})))}o.a.render(r.a.createElement(q,null),document.getElementById("root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.22c3271b.chunk.js.map